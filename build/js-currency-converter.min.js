!function(e){"use strict";e(["jquery"],function(e){return function(t){function r(t){y.isObject(t)&&(T=e.extend(T,t))}function o(){return T}function n(t,r){function o(e){y.cacheRate(i,e[i].val,new Date),c.resolve(e[i].val)}function n(e){c.reject(e)}function a(){y.setConversionInProgress(i,null)}var c=e.Deferred(),i=y.toQuery(t,r);return y.isConversionInProgress(i)?y.getConversionInProgress(i):(e.get(T.API_URL+i).done(o).fail(n).always(a),y.setConversionInProgress(i,c.promise()),c.promise())}function a(t,r){function o(e){a(!1,e)}function n(e){y.isRateCached(i)?a(!0,h[i].value):c.reject(e)}function a(e,t){c.resolve({expired:e,rate:t})}var c=e.Deferred(),i=y.toQuery(t,r);return y.isCachedRateValid(i)?a(!1,h[i].value):y.fetchQuote(t,r).done(o).fail(n),c.promise()}function c(t,r,o){function n(e){e.value=t*e.rate,c.resolve(e)}function a(e){c.reject(e)}var c=e.Deferred();return y.getRate(r,o).done(n).fail(a),c.promise()}function i(e,t){p[e]=t}function u(e){return Boolean(y.getConversionInProgress(e))}function s(e){return p[e]}function l(e){return y.isObject(h[e])}function f(e){var t=new Date(e).getTime(),r=(new Date).getTime();return r-t>T.RATES_VALIDITY_HOURS*O}function g(e){return y.isRateCached(e)&&!y.isCachedRateExpired(h[e].date)}function C(e,t,r){h[e]={value:t,date:r},T.CACHE_TO_LOCAL_STORAGE&&y.cacheToLocalStorage()}function A(e){return h[e]}function d(){y.setToLocalStorage(T.LOCAL_STORAGE_VARIABLE_NAME,h)}function v(){h=E(T.LOCAL_STORAGE_VARIABLE_NAME)||{}}function R(e,t){return(e||"")+"_"+(t||"")}function L(e){return null!==e&&"object"==typeof e}function S(e){return"string"==typeof e}function _(e,t){y.isLocalStorageAvailable()?localStorage.setItem(e,JSON.stringify(t)):console.error("Caching rates to local storage failed. Local storage not available")}function E(e){if(y.isLocalStorageAvailable())try{return JSON.parse(localStorage.getItem(e))||{}}catch(e){return{}}else console.error("Retrieving rates from local storage failed. Local storage not available")}function m(){var e="js-currency-test";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}}var O=36e5,I={RATES_VALIDITY_HOURS:24,CACHE_TO_LOCAL_STORAGE:!1,LOCAL_STORAGE_VARIABLE_NAME:"JS_CURRENCY_CONVERTER_CACHED_RATES",API_URL:"http://free.currencyconverterapi.com/api/v3/convert?compact=y&q="},T=e.extend({},I,t),h={},p={},y={};return y.config=r,y.getConfig=o,y.getRate=a,y.fetchQuote=n,y.convertAmount=c,y.isConversionInProgress=u,y.setConversionInProgress=i,y.getConversionInProgress=s,y.cacheToLocalStorage=d,y.cacheFromLocalStorage=v,y.isCachedRateValid=g,y.isRateCached=l,y.isCachedRateExpired=f,y.cacheRate=C,y.getRateFromCache=A,y.toQuery=R,y.isObject=L,y.isString=S,y.setToLocalStorage=_,y.getFromLocalStorage=E,y.isLocalStorageAvailable=m,T.CACHE_TO_LOCAL_STORAGE&&y.cacheFromLocalStorage(),y}})}("function"==typeof define&&define.amd?define:function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("jquery")):window.CurrencyConverter=t(window.jQuery)});