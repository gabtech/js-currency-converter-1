!function(e){"use strict";e(["jquery"],function(e){return function(t){function o(t){h.isObject(t)&&(I=e.extend(I,t))}function r(){return I}function n(t,o){function r(e){h.cacheRate(i,e[i].val,new Date),c.resolve(e[i].val)}function n(e){c.reject(e)}function a(){h.setConversionInProgress(i,null)}var c=e.Deferred(),i=h.toQuery(t,o);return h.isConversionInProgress(i)?h.getConversionInProgress(i):(e.get(I.API_URL+i).done(r).fail(n).always(a),h.setConversionInProgress(i,c.promise()),c.promise())}function a(t,o){function r(e){a(!1,e)}function n(e){h.isRateCached(i)?a(!0,T[i].value):c.reject(e)}function a(e,t){c.resolve({expired:e,rate:t})}var c=e.Deferred(),i=h.toQuery(t,o);return h.isRateCachedAndNonExpired(i)?a(!1,T[i].value):h.fetchQuote(t,o).done(r).fail(n),c.promise()}function c(t,o,r){function n(e){e.value=t*e.rate,c.resolve(e)}function a(e){c.reject(e)}var c=e.Deferred();return h.getRate(o,r).done(n).fail(a),c.promise()}function i(e,t){p[e]=t}function u(e){return Boolean(h.getConversionInProgress(e))}function s(e){return p[e]}function l(e){return h.isObject(T[e])}function f(e){var t=new Date(e).getTime(),o=(new Date).getTime();return o-t>I.RATES_VALIDITY_HOURS*m}function g(e){return h.isRateCached(e)&&!h.isDateExpired(T[e].date)}function A(e,t,o){T[e]={value:t,date:o},I.CACHE_TO_LOCAL_STORAGE&&h.cacheToLocalStorage()}function d(e){return T[e]}function v(){h.setToLocalStorage(I.LOCAL_STORAGE_VARIABLE_NAME,T)}function C(){T=h.getFromLocalStorage(I.LOCAL_STORAGE_VARIABLE_NAME)}function L(e,t){return(e||"")+"_"+(t||"")}function R(e){return null!==e&&"object"==typeof e}function S(e,t){h.isLocalStorageAvailable()?localStorage.setItem(e,JSON.stringify(t)):console.error("Caching rates to local storage failed. Local storage not available")}function _(e){if(h.isLocalStorageAvailable())try{return JSON.parse(localStorage.getItem(e))||{}}catch(e){return{}}else console.error("Retrieving rates from local storage failed. Local storage not available")}function E(){var e="js-currency-test";try{return localStorage.setItem(e,e),localStorage.removeItem(e),!0}catch(e){return!1}}var m=36e5,O={RATES_VALIDITY_HOURS:24,CACHE_TO_LOCAL_STORAGE:!1,LOCAL_STORAGE_VARIABLE_NAME:"JS_CURRENCY_CONVERTER_CACHED_RATES",API_URL:"http://free.currencyconverterapi.com/api/v3/convert?compact=y&q="},I=e.extend({},O,t),T={},p={},h={};return h.config=o,h.getConfig=r,h.getRate=a,h.fetchQuote=n,h.convertAmount=c,h.isConversionInProgress=u,h.setConversionInProgress=i,h.getConversionInProgress=s,h.cacheToLocalStorage=v,h.cacheFromLocalStorage=C,h.isRateCachedAndNonExpired=g,h.isRateCached=l,h.isDateExpired=f,h.cacheRate=A,h.getRateFromCache=d,h.toQuery=L,h.isObject=R,h.setToLocalStorage=S,h.getFromLocalStorage=_,h.isLocalStorageAvailable=E,I.CACHE_TO_LOCAL_STORAGE&&h.cacheFromLocalStorage(),h}})}("function"==typeof define&&define.amd?define:function(e,t){"undefined"!=typeof module&&module.exports?module.exports=t(require("jquery")):window.CurrencyConverter=t(window.jQuery)});